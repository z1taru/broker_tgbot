-- Создание таблицы FAQ
CREATE TABLE IF NOT EXISTS faq (
    id SERIAL PRIMARY KEY,
    question TEXT NOT NULL,
    answer_text TEXT NOT NULL,
    video_url TEXT,
    category VARCHAR(100) NOT NULL,
    language VARCHAR(10) DEFAULT 'kk',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Создание таблицы логов
CREATE TABLE IF NOT EXISTS logs (
    id SERIAL PRIMARY KEY,
    telegram_id VARCHAR(100) NOT NULL,
    question TEXT,
    matched_faq_id INTEGER,
    confidence FLOAT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (matched_faq_id) REFERENCES faq (id) ON DELETE SET NULL
);

-- Создание индексов для оптимизации
CREATE INDEX idx_faq_category ON faq (category);

CREATE INDEX idx_faq_language ON faq (language);

CREATE INDEX idx_logs_telegram_id ON logs (telegram_id);

CREATE INDEX idx_logs_created_at ON logs (created_at);

-- Вставка ваших данных (казахский язык)
INSERT INTO
    faq (
        question,
        answer_text,
        video_url,
        category,
        language
    )
VALUES (
        'Облигация алудың альтернативті жолы - Tabys Pro',
        'Tabys Pro приложениесін жүктейміз
Регистрация өтеміз
"Пополнить" батырмасын басып брокерге қажетті ақша соммасын саламыз. Ыңғайлысы каспи арқылы толтырып, 0% комиссия болғаны
Нарық бөліміне өтеміз-> төмендегі үшінші батырма
Облигациялар деген тізімнен облигация таңдап алып зерттесек болады
Өзімізге қажет облигацияны іздеу үшін поиск бөліміне облигация кодын жазамыз (мысалы: MFRFB19)
Нарықтық бағамен қажет облигация санын таңдаймыз
Купить батырмасы арқылы сатып аламыз

‼️Жазбаша инструкция түсініксіз болған жағдайда, видео инструкцияны қайталаңыз‼️',
        'tabys_pro_bonds.mp4',
        'tabys_pro',
        'kk'
    ),
    (
        'Фридом брокерден екінші шот қалай ашамыз?',
        'Фридом брокерге кіреміз
Меню бөлімін басамыз
"Поручения" батырмасын басамыз
"Дополнитеьный счет" дегенді таңдаймыз
Тарифтік жоспарды "Investor" н/е "Стандард" қоямыз. Өйткені екеуінің комиссиясы төменірек
"Подтвердить" дегенді басып, "ок" деп бұйрық ашамыз
Екінші шот 2 сағаттың ішінде ашылады
Оны тексеру үшін "меню" бөлімін басып, өзіміздің профильді таңдасақ - шоттарымыз шығады

‼️Жазбаша инструкция түсініксіз болған жағдайда, видео инструкцияны қайталаңыз‼️',
        'freedom_second_account.mp4',
        'freedom_broker',
        'kk'
    ),
    (
        'Фридом брокер бойынша сұрақ туындаса, тех. ақау болып жатса қолданатын инструкция',
        'Жиі студенттерде куратор шеше алмайтын, брокердің ішіндегі сұрақтар туындайды, сол кезде куратор жауабын күтпей осы лайфхакты қолдансаңыз - сұрағыңызды жылдамырақ шешесіз. Фридом брокердің профессионалды менеджерлері сіздің сұрағыңызға жауап береді.

Ең алдымен меню бөліміне кіреміз

Поддержка дегеді басамыз
Написать в поддержку деп, туындаған сұрағымызды қоямыз
Жауап 10-15 минут ішінде келеді
Егер жауап нақты түсінікті болмаса, сол жауап бойынша сұрағымызды қойсақ болады

‼️Видео инструкцияны қайталаңыз‼️',
        'freedom_support.mp4',
        'freedom_broker',
        'kk'
    ),
    (
        'Ақшан қалай долларға айырбастаймын?',
        'Біз брокерге ақша толтырған жағдайда ол "денежные средства" бөліміне түседі. Яғни бұл бос ақша, әлі ешқайда инвестиция жасалмаған. Ол теңгемен түседі және егер біз доллармен акция, etf, облигация алғымыз келсе - біз теңгені долларға айырбастаймыз. Ол үшін:

"Обменять" батырмасын басамыз 
KZT —> USD дегенді таңдаймыз, егер керісінше долларды теңгеге айырбастау керек болса USD —> KZT таңдаймыз
Керек сомманы жазамыз н/е "максимальная сумма" дегенді басып толық ауыстырып алсақ болады
Подвтердить деп сатып аламыз

‼️Видео инструкцияены қайталаңыз‼️',
        'currency_exchange.mp4',
        'freedom_broker',
        'kk'
    );